---
title: "pr"
author: "Andrew Martin"
date: "1/24/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}

library(tidyverse)
library(readxl)
```

manually read one PR

```{r}

tmp = tempfile(fileext = ".xlsx")

download.file(url = "https://rc.doe.state.nj.us/ReportsDatabase/PerformanceReports.xlsx", destfile = tmp, mode = "wb")

sheets17 <- excel_sheets(tmp) %>%
  clean_name_vector()

pr17 <- map(
  .x = c(1:length(sheets17)),
  .f = function(.x) {
    read_xlsx(tmp, sheet = .x) %>%
      janitor::clean_names()
  }
)
  
names(pr17) <- sheets17

```

read many PRs

```{r}

all_prs <- map(
  .x = c(2013:2017),
  .f = function(.x) {
    print(.x)
    get_raw_rc_database(.x)
  }
)

```

```{r}

names(all_prs[[1]]) %>% sort()
names(all_prs[[2]]) %>% sort()
names(all_prs[[3]]) %>% sort()
names(all_prs[[4]]) %>% sort()
names(all_prs[[5]]) %>% sort()

```

Extract SAT info
